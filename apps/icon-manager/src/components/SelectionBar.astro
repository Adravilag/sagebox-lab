---
import { t, type Locale } from '../lib/i18n';

interface Props {
  locale?: Locale;
}

const { locale = 'en' } = Astro.props;
const i18n = (key: Parameters<typeof t>[0]) => t(key, locale);
---

<div class="im-selection-bar" id="im-selection-bar">
  <div class="im-selection-info">
    <span id="im-selection-count">0</span> {i18n('selection.selected')}
  </div>
  <div class="im-selection-actions">
    <button class="im-btn im-btn-ghost" id="im-deselect-all">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
      {i18n('selection.clear')}
    </button>
    <button class="im-btn im-btn-primary" id="im-add-to-project">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        <line x1="12" y1="11" x2="12" y2="17"></line>
        <line x1="9" y1="14" x2="15" y2="14"></line>
      </svg>
      {i18n('selection.add_to_project')}
    </button>
    <button class="im-btn im-btn-ghost" id="im-remove-from-project" style="display: none;">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        <line x1="9" y1="14" x2="15" y2="14"></line>
      </svg>
      {i18n('selection.remove_from_project')}
    </button>
    <button class="im-btn im-btn-ghost" id="im-export-selected">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
        <polyline points="17 8 12 3 7 8"></polyline>
        <line x1="12" y1="3" x2="12" y2="15"></line>
      </svg>
      {i18n('selection.export')}
    </button>
    <button class="im-btn im-btn-danger" id="im-delete-selected">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="3,6 5,6 21,6"></polyline>
        <path d="M19,6v14a2,2 0,0 1,-2,2H7a2,2 0,0 1,-2,-2V6m3,0V4a2,2 0,0 1,2,-2h4a2,2 0,0 1,2,2v2"></path>
      </svg>
      {i18n('selection.delete')}
    </button>
  </div>
</div>

<style>
  .im-selection-bar {
    position: fixed;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    display: flex;
    align-items: center;
    gap: 1.5rem;
    padding: 0.75rem 1.25rem;
    background: #18181b;
    border: 1px solid #27272a;
    border-radius: 12px;
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
    z-index: 50;
    opacity: 0;
    visibility: hidden;
    transition: transform 300ms ease, opacity 300ms ease, visibility 300ms ease;
  }

  .im-selection-bar.visible {
    transform: translateX(-50%) translateY(0);
    opacity: 1;
    visibility: visible;
  }

  .im-selection-info {
    font-size: 0.875rem;
    color: #a1a1aa;
    white-space: nowrap;
  }

  #im-selection-count {
    color: #f4f4f5;
    font-weight: 600;
  }

  .im-selection-actions {
    display: flex;
    gap: 0.5rem;
  }

  .im-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    padding: 0.5rem 0.875rem;
    border-radius: 8px;
    font-size: 0.8125rem;
    font-weight: 500;
    cursor: pointer;
    transition: 150ms ease;
    border: none;
  }

  .im-btn-ghost {
    background: transparent;
    color: #a1a1aa;
    border: 1px solid #27272a;
  }

  .im-btn-ghost:hover {
    background: #27272a;
    color: #f4f4f5;
  }

  .im-btn-danger {
    background: rgba(239, 68, 68, 0.15);
    color: #ef4444;
    border: 1px solid rgba(239, 68, 68, 0.3);
  }

  .im-btn-danger:hover {
    background: rgba(239, 68, 68, 0.25);
  }

  .im-btn-primary {
    background: rgba(34, 197, 94, 0.15);
    color: #22c55e;
    border: 1px solid rgba(34, 197, 94, 0.3);
  }

  .im-btn-primary:hover {
    background: rgba(34, 197, 94, 0.25);
    color: #4ade80;
  }
</style>
